= OCP Console Embed Role

This role deploys the OCP Console Embed workload, which configures the OpenShift Console and OAuth server to allow embedding in iframes (e.g. for Showroom).

== Variables

[cols="1,1,2",options="header"]
|===
| Variable | Default | Description
| `ocp_console_embed_namespace` | `ocp-console-embed` | Namespace to deploy resources into.
| `ocp_console_embed_name` | `ocp-console-embed` | Base name for resources.
| `ocp_console_embed_image` | `quay.io/openshift/origin-cli:4.17` | Image to use for the webhook and job.
| `ocp_console_embed_domain` | `""` | Base domain of the OpenShift cluster.
| `ocp_console_embed_guid` | `""` | GUID of the environment.
|===

== Description

The role deploys:
- A MutatingWebhook that intercepts Route updates to `oauth-openshift` and forces `reencrypt` TLS.
- A Job that patches the default IngressController to strip `X-Frame-Options` and set `Content-Security-Policy`.
- Associated RBAC and Service resources.
